<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>{{.Title}}</title>
	</head>
	<body>
		<div id="output">
		{{.Rendered}}
		</div>

		<script>
			window.addEventListener("load", function(evt) {
    			var output = document.getElementById("output");
    			var input = document.getElementById("input");
    			var ws = new WebSocket("{{.WsUrl}}");

				ws.onopen = function () {
					console.log("Opened connection to {{.WsUrl}}");
				};

				// Log errors
				ws.onerror = function (error) {
  					console.log('WebSocket Error ' + error);
				};

				// Log messages from the server
				ws.onmessage = function (e) {
					d = JSON.parse(e.data)
					document.querySelector("#output").innerHTML = d.Html;
					document.title = d.Title;
				};
			});
		</script>
	</body>
</html>
